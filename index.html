<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeRun Consulting | Oracle EPM Cloud Experts</title>
    <meta name="description" content="Specialized consulting for Oracle EPBCS and Sales Planning Cloud implementations">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- Google reCAPTCHA Script -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        // Initialize EmailJS with your Public Key
        (function(){
            emailjs.init("ILBZr43VWmZLzAO6k"); // Replace with your EmailJS Public Key
        })();
    </script>
</head>
<body>
    <nav class="navbar">
        <a href="index.html">Home</a>
        <a href="#services">Services</a>
        <a href="#expertise">Expertise</a>
        <a href="blog/">Blog</a>
        <a href="#contact">Contact</a>
    </nav>

    <section class="hero" id="home">
        <h1>WeRun Consulting</h1>
        <p>Accelerating Your EPM Cloud Success</p>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search our site..." id="searchInput">
            <i class="fas fa-search search-icon"></i>
        </div>
        <button>Book Free Consultation</button>
    </section>

    <!-- [Services, Expertise, Blog sections unchanged for brevity] -->

    <section class="contact" id="contact">
        <h2>Get In Touch</h2>
        <form class="contact-form" id="contactForm">
            <input type="text" placeholder="Name" name="name" required>
            <input type="email" placeholder="Email" name="email" required>
            <textarea placeholder="How can we help?" name="message" rows="5" required></textarea>
            <!-- reCAPTCHA Widget -->
            <div class="g-recaptcha" data-sitekey="6Ldy2u4qAAAAAI_14Fp3Mmk5fAiGzfgdffP91o9H" style="margin: 1rem 0;"></div>
            <button type="submit" class="button">
                <i class="fas fa-paper-plane"></i> Send Message
            </button>
        </form>
    </section>

    <footer>
        <p>© 2025 WeRun Consulting. All rights reserved.</p>
    </footer>

    <script>
        const siteContent = [
            { title: "New Features in EPM Cloud 25.03", category: "update", date: "April 09, 2025", summary: "Explore the March 2025 updates...", url: "blog/epm-25.03-update.html" },
            { title: "New Features in EPM Cloud 25.02", category: "update", date: "March 09, 2025", summary: "Overview of the February 2025 updates...", url: "blog/epm-25.02-update.html" },
            { title: "Automating Data Loads in EPBCS", category: "epm", date: "March 15, 2024", summary: "Learn how to streamline your EPM processes...", url: "blog/post1.html" },
            { title: "EPBCS Solutions", category: "service", date: "Ongoing", summary: "Complete Enterprise Planning Cloud implementations...", url: "services/epbcs.html" },
            { title: "Sales Planning", category: "service", date: "Ongoing", summary: "End-to-end sales performance management...", url: "services/sales-planning.html" },
            { title: "Oracle Essbase", category: "service", date: "Ongoing", summary: "Advanced multidimensional analytics solutions...", url: "services/essbase.html" },
            { title: "Oracle BI", category: "service", date: "Ongoing", summary: "Business intelligence & analytics solutions...", url: "services/oracle-bi.html" }
        ];

        const searchInput = document.getElementById('searchInput');
        const blogPreview = document.getElementById('blogPreview');
        const searchResults = document.getElementById('searchResults');
        const servicesSection = document.getElementById('services');
        const expertiseSection = document.getElementById('expertise');

        searchInput.addEventListener('input', function() {
            const query = this.value.trim().toLowerCase();
            if (query === '') {
                blogPreview.style.display = 'grid';
                searchResults.style.display = 'none';
                servicesSection.style.display = 'grid';
                expertiseSection.style.display = 'block';
                return;
            }

            servicesSection.style.display = 'none';
            expertiseSection.style.display = 'none';
            blogPreview.style.display = 'none';
            searchResults.style.display = 'block';
            searchResults.innerHTML = '';

            const results = siteContent.filter(item =>
                item.title.toLowerCase().includes(query) ||
                item.summary.toLowerCase().includes(query) ||
                item.category.toLowerCase().includes(query)
            );

            if (results.length === 0) {
                searchResults.innerHTML = '<p>No results found.</p>';
            } else {
                results.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'blog-card';
                    card.innerHTML = `
                        <div class="post-meta">
                            <span class="category ${item.category}">${item.category === 'update' ? 'Cloud Update' : item.category === 'epm' ? 'EPM Scripting' : 'Service'}</span>
                            <span class="date">${item.date}</span>
                        </div>
                        <h3>${item.title}</h3>
                        <p>${item.summary}</p>
                        <a href="${item.url}" class="read-more">Read More →</a>
                    `;
                    searchResults.appendChild(card);
                });
            }
        });

        // Contact Form Submission with EmailJS and reCAPTCHA
        const contactForm = document.getElementById('contactForm');
        contactForm.addEventListener('submit', function(event) {
            event.preventDefault();

            // Get reCAPTCHA response
            const recaptchaResponse = grecaptcha.getResponse();
            if (!recaptchaResponse) {
                alert('Please complete the reCAPTCHA verification.');
                return;
            }

            const formData = {
                name: this.querySelector('input[name="name"]').value,
                email: this.querySelector('input[name="email"]').value,
                message: this.querySelector('textarea[name="message"]').value,
                'g-recaptcha-response': recaptchaResponse // Include reCAPTCHA token
            };

            emailjs.send('service_cax0c6e', 'template_ml6p7zu', formData)
                .then(() => {
                    alert('Message sent successfully!');
                    this.reset();
                    grecaptcha.reset(); // Reset reCAPTCHA after submission
                }, (error) => {
                    alert('Failed to send message: ' + error.text);
                });
        });
    </script>
</body>
</html>